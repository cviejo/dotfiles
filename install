#!/usr/bin/env bash

# apps
brewApps=(clang-format fnm neovim)
brewCasks=(font-dejavu-sans-mono-nerd-font rectangle)
nixApps=(tmux ranger fzf stow)

clone() {
	git clone "https://github.com/$1" "$2"
}

clone 'cviejo/dotfiles' ~/.dotfiles
cd ~/.dotfiles || exit

if [[ "$(uname)" == "Darwin" ]]; then
	brew install "${brewApps[@]}"
	brew install --cask "${brewCasks[@]}"
	nix-env -i "${nixApps[@]}"
else
	apt update
	apt install -y git curl zsh "${brewApps[@]}" "${nixApps[@]}"
fi

stow zsh nvim bin

sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --keep-zshrc --unattended

stow oh-my-zsh

zshPlugins=~/.oh-my-zsh/custom/plugins
clone 'zsh-users/zsh-autosuggestions' "${zshPlugins}/zsh-autosuggestions"
clone 'zsh-users/zsh-syntax-highlighting.git' "${zshPlugins}/zsh-syntax-highlighting"
clone 'Aloxaf/fzf-tab' "${zshPlugins}/fzf-tab"
clone 'jeffreytse/zsh-vi-mode' "${zshPlugins}/zsh-vi-mode"

tmuxPlugins=~/.config/tmux-plugins
clone 'tmux-plugins/tpm' "${tmuxPlugins}/tpm"

stow config

"${tmuxPlugins}/tpm/bin/install_plugins"

